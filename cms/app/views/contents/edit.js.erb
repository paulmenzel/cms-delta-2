$('#contentrelationwindow').remove();

$('body').append("<%= j( render :partial => 'contents/edit_modal' )  %>");

$('#contentrelationwindow').modal({ backdrop: true, keyboard: false });


$(".datepicker").datepicker({
  format: "yyyy-mm-dd",
  weekStart: 1,
  calendarWeeks: true,
  language: "de"
});

$(".timepicker").timepicker({
  showMeridian: false,
  template: false,
  showInputs: false,
  defaultTime: false,
  minuteStep: 15
});

$('#contentrelationwindow form').on('submit',   function() { 
  allok = true;

  if($(this).find('.required').length > 0)
  {
	  $(this).find('.required').each(function(){ 
        if($(this).val().length == 0 && ($(this).is('input') || $(this).is('textarea') ))
        {
    	    allok = false;  
          $(this).parent().parent().addClass('error');
        }
        else
        {
          $(this).parent().parent().removeClass('error');
        }
      });
    }

  if(allok)
  {
    NProgress.start(); NProgress.set(0.8); 
  }
  else
  {
    return false;
  }

});

NProgress.done();